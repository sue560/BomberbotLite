<!DOCTYPE html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="robot.js"></script>
  </head>
  <body>
    <div class="robot">
      <div class="walk-forward">
      </div>
      <div class="instruction">
        <img src="moveforward.jpg" width="50px" height="50px" id="move-forward-button" class="forward-button">
        <div class="numberClicks">
        </div>
      </div>
    </div>
    <div class="text-editor">
      <button class="play">Run Code</button>
    </div>
    <div class="robot2">
      <div class="rotate-right">
      </div>
      <div class="instruction">
        <img src="turnright.png" width="50px" height="50px" id="turn-right-button" class="turnright-button">
        <div class="numberClicksTurn">
        </div>
      </div>
    </div>
    <div class="text-editor2">
    </div>
    <script>
 
    $(document).ready(function () {
    $('#move-forward-button').click(function() {
        $('.walk-forward').toggleClass('active'), 
        $('.text-editor').append("<p>Walk 1 Step Forward</p>");
    });
    
    $('#turn-right-button').click(function() {
        $('.rotate-right').toggleClass('active');
        $(".text-editor2").append("<p>Rotate Right</p>");
       });
  });


// save the number of clicks to the button and then run the total number of times the instruction is added
$(document).ready(function () {
   var count=0;
   $('#move-forward-button').click(function () {
      count++;
      $('.numberClicks').text(count);
      // $('.text-editor').append('<p>moveForward();</p>');
   });

  $('.play').click(function () {
    animateRobot(count);
    // for (i=0; i < count; i++) {
    //   $('.walk-forward').addClass('active');
    //   $('.walk-forward').on('animationend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function () {
    //     console.log("Finished animation!");
    //     $('.walk-forward').removeClass('active');
    //   });
    //   console.log("Finishing loop!");
    // };
  });

  function animateRobot(count) {
    console.log("Count: " + count);
    if (count === 0) {
      console.log("Returning!");
      return
    }
    $('.walk-forward').addClass('active');
    $('.walk-forward').on('animationend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function () {
      var robotWalk = $('.walk-forward').clone().removeClass('active');
      $('.walk-forward').remove();
      $('.robot').prepend(robotWalk);
      // $('.walk-forward').addClass('active');
      console.log("Finished animation!");
      // $('.walk-forward').removeClass('active');
      animateRobot(count-1);
    });
    $('.rotate-right').addClass('active');
  }
});

//original code - normal walk forward functionality
// $(document).ready(function () {
//    var count=0;
//    $('#move-forward-button').click(function () {
//       count++;
//       $('.walk-forward').addClass('active');
//       $('.text-editor').append('<p>Walk 1 Step Forward</p>');
//       $('.walk-forward').on('animationend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function () {
//           $('.walk-forward').removeClass('active');
//       });
//    });
//   });


    </script>
  </body>
</html>